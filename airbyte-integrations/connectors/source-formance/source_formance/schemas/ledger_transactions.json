{
  "type": "object",
  "properties": {
    "timestamp": {
      "type": "string",
      "format": "date-time"
    },
    "postings": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "amount": {
            "type": "integer",
            "format": "int64",
            "minimum": 0,
            "example": 100
          },
          "asset": {
            "type": "string",
            "example": "COIN"
          },
          "destination": {
            "type": "string",
            "example": "users:002"
          },
          "source": {
            "type": "string",
            "example": "users:001"
          }
        },
        "required": [
          "amount",
          "asset",
          "destination",
          "source"
        ],
        "$schema": "http://json-schema.org/schema#"
      }
    },
    "reference": {
      "type": "string",
      "example": "ref:001"
    },
    "metadata": {
      "type": "object",
      "nullable": true,
      "patternProperties": {
        ".*": {}
      },
      "example": {
        "admin": true,
        "a": {
          "nested": {
            "key": "value"
          }
        }
      },
      "$schema": "http://json-schema.org/schema#"
    },
    "txid": {
      "type": "integer",
      "format": "int64",
      "minimum": 0
    },
    "preCommitVolumes": {
      "type": "object",
      "patternProperties": {
          ".*": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "properties": {
                "input": {
                  "type": "integer",
                  "format": "int64"
                },
                "output": {
                  "type": "integer",
                  "format": "int64"
                },
                "balance": {
                  "type": "integer",
                  "format": "int64"
                }
              },
              "required": [
                "input",
                "output"
              ],
              "example": {
                "input": 100,
                "output": 20,
                "balance": 80
              },
              "$schema": "http://json-schema.org/schema#"
            }
          },
          "example": {
            "USD": {
              "input": 100,
              "output": 10,
              "balance": 90
            },
            "EUR": {
              "input": 100,
              "output": 10,
              "balance": 90
            }
          },
          "$schema": "http://json-schema.org/schema#"
        }
      },
      "example": {
        "orders:1": {
          "USD": {
            "input": 100,
            "output": 10,
            "balance": 90
          }
        },
        "orders:2": {
          "USD": {
            "input": 100,
            "output": 10,
            "balance": 90
          }
        }
      },
      "$schema": "http://json-schema.org/schema#"
    },
    "postCommitVolumes": {
      "type": "object",
      "patternProperties": {
          ".*": {
          "type": "object",
          "patternProperties": {
            ".*": {
              "type": "object",
              "properties": {
                "input": {
                  "type": "integer",
                  "format": "int64"
                },
                "output": {
                  "type": "integer",
                  "format": "int64"
                },
                "balance": {
                  "type": "integer",
                  "format": "int64"
                }
              },
              "required": [
                "input",
                "output"
              ],
              "example": {
                "input": 100,
                "output": 20,
                "balance": 80
              },
              "$schema": "http://json-schema.org/schema#"
            }
          },
          "example": {
            "USD": {
              "input": 100,
              "output": 10,
              "balance": 90
            },
            "EUR": {
              "input": 100,
              "output": 10,
              "balance": 90
            }
          },
          "$schema": "http://json-schema.org/schema#"
        }
      },
      "example": {
        "orders:1": {
          "USD": {
            "input": 100,
            "output": 10,
            "balance": 90
          }
        },
        "orders:2": {
          "USD": {
            "input": 100,
            "output": 10,
            "balance": 90
          }
        }
      },
      "$schema": "http://json-schema.org/schema#"
    }
  },
  "required": [
    "postings",
    "timestamp",
    "txid"
  ],
  "$schema": "http://json-schema.org/schema#"
}